# ESP-LiveView: 实时图像传输与显示系统

## 技术原理

这个项目的技术原理涉及多个层面的集成，形成了一个完整的实时图像采集、传输和显示系统。

### 1. 硬件层面
- **ESP32S3微控制器**：一款强大的SoC，具有集成WiFi功能，能够处理图像数据并通过网络传输
- **相机模块**：通过GPIO引脚连接到ESP32S3，使用专用通信协议传输图像数据
- **PSRAM支持**：ESP32S3的PSRAM(外部RAM)用于存储高分辨率图像数据

### 2. 客户端工作流程
- **相机初始化**：配置相机参数（分辨率、质量等）
- **图像采集**：使用`esp_camera_fb_get()`函数捕获JPEG格式的图像帧
- **数据打包**：将图像数据封装为multipart/form-data格式的HTTP请求
- **网络传输**：通过WiFi连接将数据发送到远程服务器

### 3. 服务器架构
- **Flask框架**：轻量级Python Web框架，处理HTTP请求和响应
- **REST API设计**：
  * `/upload` 端点接收图像数据
  * `/latest` 端点提供最新图像的元数据
  * `/images/<filename>` 端点提供图像文件访问
- **文件管理**：将上传的图像保存到服务器文件系统并维护元数据

### 4. 实时更新机制
- **AJAX轮询**：前端JavaScript定期查询服务器获取最新图像信息
- **条件更新**：比较时间戳，仅当有新图像时才更新界面
- **无缝加载**：动态替换DOM元素，实现无刷新页面更新

### 5. 数据流程
ESP32S3拍照 → JPEG压缩 → HTTP上传 → 服务器存储 → 浏览器检查 → 动态显示

这个系统采用了客户端主动上传与浏览器轮询相结合的方式，避免了复杂的WebSocket实现，同时保证了图像的实时性和系统的可靠性。整个架构简洁高效，容易部署和维护。

